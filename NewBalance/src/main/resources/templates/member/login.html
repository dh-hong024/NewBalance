<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<h2>Login</h2>
    <form id="loginForm" action="/login/loginCheck" method="post" th:object="${memberDto}">
        <label th:for="userId">아이디</label>
        <input type="text"  th:field="*{userId}"> <br>

        <label th:for="password">비밀번호</label>
        <input type="password" th:field="*{password}"> <br>

        <div th:if="error">
            <p id="valid"><a th:text="${exception}"></a></p>
        </div>

        <div id="idAvaliable" class="valid-feedback" style="display: none;">true</div>
        <button type="submit" id="loginBtn" sec:authorize="isAnonymous()">로그인</button>
        <button type="submit" id="logoutBtn" sec:authorize="isAuthenticated()">로그아웃</button>

    </form>

</body>

<script>

   // $(function (){
   //    $('#loginBtn').click(function (){
   //       var idChk = $('#userId').val();
   //       // var pwChk = $('#password').val();
   //       var formChk = $('#loginForm').serialize();
   //       console.log(formChk);
   //       if(idChk == ""){
   //           $('#idAvaliable').show().text('아이디를 입력해주세요.');
   //       } else{
   //           $.ajax({
   //               type:"post",
   //               url:"/members/loginCheck",
   //               data : formChk ,
   //               success:function (data){
   //                   console.log(data);
   //
   //               },
   //               error:function (error){
   //                   console.log(error);
   //                   alert(error);
   //
   //               }
   //           });
   //        }
   //    });
   // });
</script>

</html>